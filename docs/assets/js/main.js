const form=document.getElementById("form"),inputSearch=document.getElementById("search"),bookmarkList=document.getElementById("bookmarks"),drinksList=document.getElementById("list"),API_URL="https://www.thecocktaildb.com";let bookmarks=[];async function searchTvShows(e){const t=await fetch(`${API_URL}/api/json/v1/1/search.php?s=${e}`);return(await t.json()).drinks}function initApp(){const e=localStorage.getItem("bookmarks");if(null!==e){const t=JSON.parse(e);bookmarks=t,renderBookmarks()}form.addEventListener("submit",(async e=>{e.preventDefault(),drinksList.innerHTML="";const t=inputSearch.value.toLowerCase();listDrinks(await searchTvShows(t))})),clearBookmarks()}function renderBookmarks(){for(const e of bookmarks){const t=createListItem(e),o=document.createElement("button");o.innerText="x",t.appendChild(o),bookmarkList.appendChild(t),o.addEventListener("click",(()=>{bookmarkList.innerHTML="",renderBookmarks(),localStorage.setItem("bookmarks",JSON.stringify(bookmarks))}))}}function clearBookmarks(){form.addEventListener("reset",(e=>{e.preventDefault(),bookmarkList.innerHTML="",bookmarks=[],localStorage.removeItem("bookmarks")}))}function listDrinks(e){for(const t of e){const e=createListItem(t);drinksList.appendChild(e),e.addEventListener("click",(o=>{o.preventDefault();bookmarks.find((e=>e.idDrink===t.idDrink))||(e.style.border="2px solid #f8b5d6",e.style.fontStyle="Italic",bookmarks.push(t),localStorage.setItem("bookmarks",JSON.stringify(bookmarks))),bookmarkList.innerHTML="",renderBookmarks()}))}}function createListItem(e){const t=document.createElement("li"),o=document.createElement("p");if(o.innerText=e.strDrink.toLowerCase(),t.appendChild(o),e){const o=document.createElement("img");o.src=e.strDrinkThumb||e.strDrinkThumb,t.appendChild(o)}else{const e=document.createElement("img");e.src="./assets/images/images.jpeg",t.appendChild(e)}return t}searchTvShows(),initApp();